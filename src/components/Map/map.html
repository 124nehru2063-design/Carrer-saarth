<!DOCTYPE html>
<html>
<head>
  <title>India Places Finder</title>
  <meta charset="utf-8" />
  <style>
    body { font-family: Arial; margin: 0; }
    #controls {
      display: flex;
      gap: 10px;
      padding: 10px;
      background: #f5f5f5;
      flex-wrap: wrap;
    }
    select {
      padding: 8px;
      font-size: 14px;
    }
    #map { height: 60vh; width: 100%; }
    #results {
      padding: 10px;
      max-height: 30vh;
      overflow-y: auto;
    }
    .card {
      border: 1px solid #ddd;
      padding: 8px;
      margin-bottom: 6px;
      border-radius: 6px;
    }
  </style>
</head>

<body>

<div id="controls">
  <select id="stateSelect" onchange="loadDistricts()">
    <option value="">Select State</option>
  </select>

  <select id="districtSelect" onchange="loadCities()">
    <option value="">Select District</option>
  </select>

  <select id="citySelect" onchange="searchPlaces()">
    <option value="">Select City</option>
  </select>

  <select id="placeTypeSelect" onchange="searchPlaces()">
    <option value="">Select Category</option>
    <option value="university">üéì College</option>
    <option value="school">üè´ School</option>
    <option value="hospital">üè• Hospital</option>
    <option value="atm">üèß ATM</option>
    <option value="shopping_mall">üõç Shopping</option>
    <option value="restaurant">üçΩ Restaurant</option>
  </select>
</div>

<div id="map"></div>
<div id="results"></div>

<script>
/* =========================
   STATE ‚Üí DISTRICT ‚Üí CITY
   ========================= */
const indiaData = {

  "Maharashtra": {
    "Mumbai Suburban": ["Mumbai", "Andheri","Dadar","bandra" ,"Borivali"],
    "Thane": ["Thane", "Navi Mumbai", "Kalyan", "Dombivli"],
    "Palghar": ["Palghar", "Virar", "Vasai","Dahanu","Kelve road" ,"Boisar", "Umroli"]
  },

  "Telangana": {
    "Hyderabad": ["Hyderabad", "Secunderabad"],
    "Rangareddy": ["Gachibowli", "Shamshabad"],
    "Warangal": ["Warangal"]
  },

  "Tamil Nadu": {
    "Chennai": ["Chennai", "Tambaram", "Avadi"],
    "Coimbatore": ["Coimbatore", "Pollachi"],
    "Madurai": ["Madurai"]
  },

  "Jammu & Kashmir": {
    "Srinagar": ["Srinagar"],
    "Jammu": ["Jammu"],
    "Anantnag": ["Anantnag"]
  }

};

let map;
let markers = [];

/* =========================
   INIT MAP
   ========================= */
function initMap() {
  map = new google.maps.Map(document.getElementById("map"), {
    center: { lat: 22.5937, lng: 78.9629 },
    zoom: 5
  });

  loadStates();
}

/* =========================
   LOAD STATES
   ========================= */
function loadStates() {
  const stateSelect = document.getElementById("stateSelect");
  Object.keys(indiaData).forEach(state => {
    const opt = document.createElement("option");
    opt.value = state;
    opt.textContent = state;
    stateSelect.appendChild(opt);
  });
}

/* =========================
   LOAD DISTRICTS
   ========================= */
function loadDistricts() {
  const state = stateSelect.value;
  districtSelect.innerHTML = `<option value="">Select District</option>`;
  citySelect.innerHTML = `<option value="">Select City</option>`;
  clearMarkers();

  if (!state) return;

  Object.keys(indiaData[state]).forEach(district => {
    const opt = document.createElement("option");
    opt.value = district;
    opt.textContent = district;
    districtSelect.appendChild(opt);
  });
}

/* =========================
   LOAD CITIES
   ========================= */
function loadCities() {
  const state = stateSelect.value;
  const district = districtSelect.value;
  citySelect.innerHTML = `<option value="">Select City</option>`;
  clearMarkers();

  if (!district) return;

  indiaData[state][district].forEach(city => {
    const opt = document.createElement("option");
    opt.value = city;
    opt.textContent = city;
    citySelect.appendChild(opt);
  });
}

/* =========================
   CLEAR MAP
   ========================= */
function clearMarkers() {
  markers.forEach(m => m.setMap(null));
  markers = [];
  document.getElementById("results").innerHTML = "";
}

/* =========================
   SEARCH PLACES (CITY BASED)
   ========================= */
function searchPlaces() {
  const city = citySelect.value;
  const type = placeTypeSelect.value;
  if (!city || !type) return;

  clearMarkers();

  const geocoder = new google.maps.Geocoder();
  geocoder.geocode({ address: city + ", India" }, (res, status) => {
    if (status !== "OK") return;

    const location = res[0].geometry.location;
    map.setCenter(location);
    map.setZoom(13);

    const service = new google.maps.places.PlacesService(map);
   
  

        service.nearbySearch({
  location,
  radius: 12000,
  type
}, (places, status) => {

  if (status !== google.maps.places.PlacesServiceStatus.OK || !places.length) {
    document.getElementById("results").innerHTML =
      "<div class='card'>‚ùå No nearby places found</div>";
    return;
  }

  places.forEach(p => {
    const marker = new google.maps.Marker({
      map: map,
      position: p.geometry.location
    });

    markers.push(marker);

    const info = new google.maps.InfoWindow({
      content: `<strong>${p.name}</strong><br>${p.vicinity || ""}`
    });

    marker.addListener("click", () => {
      info.open(map, marker);
    });

    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `
      <strong>${p.name}</strong><br>
      üìç ${p.vicinity || ""}
    `;

    card.onclick = () => {
      map.panTo(p.geometry.location);
      map.setZoom(16);
      info.open(map, marker);
    };

    document.getElementById("results").appendChild(card);
  });
});


        
    });
  }

</script>

<script async defer
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCkmjSF7wxE24h5t1k7_hsbWg&libraries=places&callback=initMap">
</script>

</body>
</html>
